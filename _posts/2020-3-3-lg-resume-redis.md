---
layout: post
title: "面试题-Redis"
date:   2020-3-3
tags: 
  - Golang
comments: true
author: feng6917
---

`持续更新中...`

<!-- more -->

1. 什么是Redis？
    <details>
    <summary>Ans</summary>
    Redis是一个高性能的非关系型的键值对数据库，使用C编写实现的。于传统的数据库不同的是Redis是存在内存中的，所以读写速度非常快，每秒可以处理超过10万次读写操作，这也是Redis被广泛用于缓存、消息队列、分布式锁等场景的原因。
    </details>

2. Redis的优缺点？
    <details>
    <summary>Ans</summary>
    优点:
    <ul>
        <li>读写性能好，读的速度可达110000次/s，写的速度可达81000次/s。</li>
        <li>支持数据持久化，有AOF和RDB两种持久化方式。</li>
        <li>数据结构丰富，支持String，List, Set, Hash等结构。</li>
        <li>支持事务，Redis所有的操作都是原子性的，并且还支持几个操作合并后的原子性执行，原子性指操作要么成功执行，要么失败不执行，不会执行一部分。</li>
        <li>支持主从复制，主机可以自动将数据同步到从机，进行读写分离。</li>
    </ul>
    缺点：
    <ul>
        <li>因为Redis是将数据存到内存中的，所以会收到内存大小的限制，不能用作海量数据的读写。</li>
        <li>Redis不具备自动容错和恢复功能，主机或从机宕机会导致前端部分读写请求失败，需要重启机器或者手动切换前端的IP才能切换。</li>
    </ul>
    </details>

3. Redis为什么常常用作缓存？相比于guava有什么优势？
    <details>
    <p>缓存的定义是访问速度比一般随机存取存储器快的一种高速存储器，而因为Redis是基于内存提供了高性能的数据存取功能，其比较显著的优势就是非常地快。</p>
    <p>缓存可以分为本地缓存或者分布式缓存，比较常用的guava缓存就是一种本地缓存，其主要特点是轻量并且快速，生命周期随着JVM的销毁而结束，缺点是在多实例的情况下，每个实例都要自己保存一份缓存，这样会导致缓存的一致性出现问题。</p>
    <p>Redis则是分布式缓存，在多实例情况下，每个实例都共享一份缓存数据，缓存具备一致性。缺点要保持Redis的高可用整体架构会比较复杂。</p>
    </details>

4. Redis和Memcached的区别于相同点？
    <details>
    <summary>Ans</summary>
    相同点：
    <ul>
        <li>两者的读写性能都比较高</li>
        <li>都是基于内存的数据库，通常被当作缓存使用</li>
        <li>都有过期策略</li>
        <li>都是基于C语言实现</li>
    </ul>
    不同点：
        <img src="../images/2020-3-3/11.jpg">
    </details>

5. Redis 是单线程还是多线程？Redis 为什么这么快？
    <details>
    <summary>Ans</summary>
    Redis6.0之前是单线程的，Redis6.0之后引入了多线程，但是默认情况下是关闭的，需要手动开启。

    Redis之所以这么快，主要原因是：
    <ul>
        <li>运行在内存中，内存的读写速度非常快</li>
        <li>基于C语言实现，C语言在内存操作方面性能高</li>
        <li>数据结构简单，操作简单</li>
        <li>使用IO多路复用技术，非阻塞IO</li>
        <li>单线程避免了多线程的上下文切换开销</li>
    </ul>
    </details>

6. Redis6.0之后为什么引入了多线程？
    <details>
    <summary>Ans</summary>
    Redis6.0之前是单线程的，但是随着互联网的快速发展，Redis的QPS已经无法满足互联网的需求，所以Redis6.0之后引入了多线程，但是默认情况下是关闭的，需要手动开启。

    Redis6.0引入多线程主要是为了提高网络IO的读写性能，因为Redis的瓶颈主要在于网络IO，而非CPU，执行命令还是单线程执行的，所以也不存在线程安全的问题。
    </details>

7. Redis的持久化方式有哪些？有什么区别？
    <details>
    <summary>Ans</summary>
    Redis的持久化方式有两种：RDB和AOF。

    RDB是Redis默认的持久化方式，在指定的时间间隔内，将内存中的数据集快照写入磁盘，也就是Snapshot快照，它恢复时是将快照文件直接读到内存中。

    AOF则是将Redis的操作日志以追加的方式写入文件中，恢复时是将文件中的命令重新执行一遍。

    两者之间的区别：
    <ul>
        <li>RDB持久化方式是在指定的时间间隔内将内存中的数据集快照写入磁盘，而AOF持久化方式则是将Redis的操作日志以追加的方式写入文件中。</li>
        <li>RDB持久化方式在恢复时是将快照文件直接读到内存中，而AOF持久化方式则是将文件中的命令重新执行一遍。</li>
        <li>RDB持久化方式在内存中生成快照，而AOF持久化方式则是将操作日志写入文件中。</li>
        <li>RDB持久化方式在恢复时速度较快，而AOF持久化方式在恢复时速度较慢。</li>
    </ul>
    </details>

8. Redis的数据类型有哪些？
    <details>
    <summary>Ans</summary>
    Redis支持五种数据类型：String（字符串），Hash（哈希），List（列表），Set（集合）和Zset（有序集合）。还有三种不那么常见的数据类型：HyperLogLog（基数统计），Bitmap（位图）和Stream（流）。
    <img src="../images/2020-3-3/12.jpg">
    <p>Bitmap: 位图，是一个以位为单位的数组，数组中只能存储1或0，数组的下标再Bitmap中叫做偏移量。Bitmap实现统计功能，更省空间。布隆过滤器就有用到这种数据结构，布隆过滤器可以判断出哪些数据一定不在数据库中，所以常被用来解决Redis缓存穿透问题。</p>
    <p>Hyperloglog: HyperLogLog 是一种用于统计基数的数据集合类型，每个 HyperLogLog 键只需要花费12KB内存，接口已计算接近2^64个不同元素的基数。HyperLogLog 的优点是，在输入元素的数量或者体积非常大时，计算基数所需的空间总是固定的，并且时很小的。缺点是 HyperLogLog 的统计规则是基于概率完成的，所以它给出的统计结果是有一定误差的，标准误算率是0.81%。常见的应用场景：统计网站的UV。</p>
    <p>Geospatial: 主要用于存储地理位置信息，常用于定位附近的人，打车距离的计算等。</p>
    </details>

9.

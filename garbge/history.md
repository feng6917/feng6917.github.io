#### 阿甘

1. 对微服务怎么看？
2. 项目中的亮点？（针对项目提问）
3. 如何针对峰值流量进行优化？

#### 简历剖析

1. 熟悉常用web框架，使用过gin,kratos。

    1. 一个基本的框架需要具备哪些功能？

    2. 掌握gin框架，gin 中的特性，handlerchain? context? redix tree?
        1. redix tree?
            1. 多叉树结构，每个节点保存一个字符，相同前缀的节点保存在同一个子树中。
            2. 倘若某个父节点有且仅有一个子节点，并且不存在单词以这个父节点为结尾，则对这个父节点进行压缩，用这个子节点的字符代替这个父节点。
            3. 链路越长，放在左边，更容易被检索。（优化）
        2. context?
            1. 定义了pool ，用于存储context，避免每次创建context带来的性能损耗。每次创建进行清理，使用后放回。

2. 负责过项目重构，设计数据库迁移，权限设计，数据存储等？

    1. 数据迁移？

    2. 权限设计？

    3. 数据存储？
        云服务与私有化服务共存，工厂模式，选择存储类型存储。

3. 熟悉常用数据库，消息队列，中间件？
    1. mysql 数据库相关知识？
    2. redis 数据库相关知识？
    3. 消息队列相关知识？内存队列，延迟队列如何设计？
    4. 中间件相关知识？还有哪些中间件？

4. 熟悉容器化开发，私有部署？
    1. 容器化开发的流程？
       1. 构建环境镜像，集成基本开发环境。
       2. 利用dev containers 在容器内进行开发，打包。
    2. 容器化开发中遇到的问题？
       1. 数据丢失，文件挂载，不方便。
    3. 私有部署的流程？
       1. 镜像拉取，服务文件挂载，服务脚本编辑，程序打包。
       2. 拷贝压缩包，执行脚本，启动服务。

5. 对devops，微服务，服务治理有一定经验？
    1. devops？
    2. 微服务？
    3. 服务治理？
        1. 链路追踪
        2. 服务熔断、降级
        4. 服务限流
        5. 日志监控 prometheus,grafana
        6. 配置中心 etcd, consul
        7. 服务注册与发现 nacos
        8. 服务网关 grpcgateway

6. 项目中遇到的问题，如何解决？
    1. 梳理问题，什么原因导致的，是否频繁，是否固定时间段出现，是否可以复现。
    2. 分析问题，根据问题现象，分析问题原因，是否是代码问题，是否是环境问题，是否是配置问题，是否是第三方问题。
    3. 解决问题，通过经验，查询资料，请教同事去解决。

7. 对未来的规划？
    一定要清晰，具体，有目标。
    短期：探索云原生这一块，docker, k8s内部实现去详细学习一下。
    中期：web3.0,区块链详细学习一下。

8. 蜂鸟项目
    1. 提升千万级数据检索速度，优化？
        1. 本身使用tidb分布式数据库，内部实现分布式存储。
        2. 对数据进行分区，按照分区进行数据检索
        3. 使用延迟，批量写入，缓存读取等优化。
        --------
        1. 多主多从，实现分片集群，
        2. 服务降级，其他无关紧要任务降级
        3. 服务限流，限制查询数量。

        4. 多节点部署，负载均衡。
        5. 服务拆分，数据拆分，多个服务组装数据返回。
        6. 数据库重新设计，代码优化，索引优化，查询优化, 并发写入。

    2. 压缩网闸传输数据，与多服务对接分批返回响应？
        1. 对传输数据进行压缩，减少传输数据量，提高传输速度。
        2. 对多服务进行分批返回响应，减少服务压力，提高服务响应速度。

    3. 实现布控服务业务拆分，多副本部署？
        1. 布控服务业务拆分，业务服务，任务服务。
            - 业务服务负责接收客户端请求，对请求进行响应，任务创建直接通过grpc协议调度，删改进行广播提供grpc流供订阅。
            - 任务服务负责提供grpc创建协议，入队，任务执行。订阅业务服务广播，进行任务调度的实时同步。

    4. 实现摘要复用，动态缩略图等优化？
        1. 对已经进行分析的视频流时间段进行复用，减少重复分析。
        2. 页面上对摘要图响应较长，原因是摘要图比较大，如果对所有的摘要图进行缩略图处理，完全没有必要，因为生成的摘要图不一定都会查看。因此对已经查看的缩略图进行异步处理，下次返回的时候直接返回缩略图。

    5. 集成链路追踪，限流，熔断等？
        1. 链路追踪，使用jaeger集成，实现服务调用链路追踪，方便服务问题排查。
        2. 限流，使用ratelimit实现限流。
            限流几种方式，计数器，令牌桶，漏桶，滑动窗口。
        3. 熔断，使用hystrix实现熔断。
            熔断的状态：开启熔断，关闭熔断，半开状态。
        4. 日志监控，使用prometheus实现日志监控。

9. 云平台项目
    1. 替换rust技术栈，优化？
        1. 对业务分析，梳理服务逻辑，参考原有协议，传参，返回值等
        2. 画图

    2. 重构arstudio，优化？
        1. 对业务进行分析，对冗余服务进行合并，优化
    3. mysql->pg数据迁移？
        1. 代码（查询语句部分不能使用，类型字段调整）
        2. 数据迁移（全量及增量迁移，保证新老系统稳定过渡）

    4. rbac权限系统设计？
        1. 用户属于角色，同时用户属于角色，如属于部门，输入管理员等。
        2. 角色具备操作某资源权限，例如 管理员具备查看用户列表，查看角色列表等权限。

    5. excel 通用，导出插件，自定义格式？
        1. 基于reflect 反射实现字段忽略，重命名，值方法调整等

10. oa 项目
    1. 数据迁移，mysql&ftp服务器 迁移？
        1. 基于binlog日志迁移？
        2. 基于ftp文档迁移
    2. 内部考核系统？
        1. 考题导入，excel导入？
        2. 考题随机抽取，随机生成答案？
        3. 考题答案多选比对
        4. PDF处理
        5. 考试时间限制，考试时间到自动交卷
        6. 考试结果统计，生成图表

    3. 网盘服务，在线预览？
        1. 实现文件夹及文件父子级权限
        2. 基于自然算法实现父级排序
        3. 实现文档在线预览
        4. 实现文件增删改查权限控制

    4. casbin 权限，用户，角色，权限管理？
        casbin 是一个强大且高效的开源访问控制库，支持各种访问模型，用于在全局范围内执行授权。

        1. 权限（Permission）
            权限是指用户对特定资源（如数据、功能、服务）的访问或操作能力。权限通常由三元组表示，即 (Subject, Object, Action)，其中：

            Subject：主体，即请求权限的用户或实体。
            Object：对象，即权限所针对的资源。
            Action：动作，即对资源的操作，如读取、写入、删除等。
        2. 策略（Policy）
            策略是定义权限的规则或规则集。策略可以基于不同的因素，如时间、地点、设备等，来决定是否授予某个权限。策略通常由三元组 (Subject, Object, Action) 表示。

        3. 影响（Effect）
            影响是指策略的结果，即是否授予或拒绝某个权限。影响通常有两种：允许（Allow）和拒绝（Deny）。

        4. 请求（Request）
            请求是指用户对特定资源进行访问或操作的请求。请求通常由三元组 (Subject, Object, Action) 表示。

        5. 匹配器（Matcher）
            匹配器是用于匹配请求和策略的工具。匹配器根据请求和策略中的条件，判断请求是否满足策略的要求。

        6. 角色（Role）
            角色是权限的集合，用于简化权限管理。用户可以拥有一个或多个角色，每个角色拥有特定的权限。角色通常由 (Subject, Role) 表示。

        7. 权限管理（Permission Management）
            权限管理是指对用户、角色和权限进行管理的过程，包括权限的授予、撤销、更新等操作。

        8. 角色管理（Role Management）
            角色管理是指对角色进行管理的过程，包括角色的创建、删除、更新等操作。

        9. 权限模型（Permission Model）
            权限模型是权限管理的一种方法或框架，用于定义和管理权限。常见的权限模型有：

            访问控制列表（ACL，Access Control List）：将权限直接授予用户或角色。
            基于角色的访问控制（RBAC，Role-Based Access Control）：将权限授予角色，用户通过角色获得权限。
            基于属性的访问控制（ABAC，Attribute-Based Access Control）：根据请求的属性（如时间、地点、设备等）来决定权限。

    5. 表单权限 实现，自己如何设计？
        根据表单字段量级进行配置：
        1. 如果较少，可以在角色与表单关联信息中增加冗余字段。
        2. 如果较多，则可以增加表单字段权限表，关联角色与表单权限及表单字段权限。
